<% var user=typeof user !=='undefined' ? user : null; %>

	<nav class="bg-gray-800 px-6 py-4 flex justify-between items-center shadow-md">
		<div class="flex items-center space-x-8">
			<a href="/" class="text-xl font-bold hover:text-blue-400 transition">PongGame</a>

			<% if (user) { %>
				<!-- Opciones para usuario logueado -->
				<ul class="hidden md:flex space-x-6 text-gray-300 items-center">
					<li><a href="/" class="hover:text-blue-400 transition">Home</a></li>
					<li><a href="/local" class="hover:text-blue-400 transition">Local</a></li>
					<li><a href="/multiplayer" class="hover:text-blue-400 transition">Multiplayer</a></li>
					<li><a href="/tournament" class="hover:text-blue-400 transition">Tournament</a></li>
					<li><a href="/ranking" class="hover:text-blue-400 transition">Ranking</a></li>
					<li><a href="/search" class="hover:text-blue-400 transition">Buscar usuarios</a></li>
				</ul>
				<% } else { %>
					<!-- Opciones para no logueado -->
					<ul class="hidden md:flex space-x-6 text-gray-300">
						<li><a href="/" class="hover:text-blue-400 transition">Home</a></li>
						<li><a href="/about" class="hover:text-blue-400 transition">About</a></li>
						<li><a href="/contact" class="hover:text-blue-400 transition">Contact</a></li>
					</ul>
					<% } %>
		</div>

		<!-- Estado usuario -->
		<div id="userState" class="flex items-center space-x-4">
			<% if (user) { %>
				<span class="text-gray-300 hidden sm:inline">Hola, <strong>
						<%= user.username %>
					</strong></span>

				<!-- Icono perfil (puedes cambiar el src por el de la imagen de perfil real) -->
				<a href="/profile"
					class="block w-10 h-10 rounded-full overflow-hidden border-2 border-blue-600 hover:border-blue-400 transition">
					<% if (user.avatarUrl) { %>
						<img src="<%= user.avatarUrl %>" alt="Perfil" class="w-full h-full object-cover" />
						<% } else { %>
							<!-- SVG icono usuario simple -->
							<svg class="w-full h-full text-gray-400" fill="currentColor" viewBox="0 0 24 24">
								<path
									d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z" />
							</svg>
							<% } %>
				</a>

				<a href="/auth/log-out" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition font-semibold ml-2">
					Log out
				</a>

				<% } else { %>
					<a href="/auth/login"
						class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition font-semibold">Log in</a>
					<% } %>
		</div>
	</nav>