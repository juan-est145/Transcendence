(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&h(l)}).observe(document,{childList:!0,subtree:!0});function g(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(n){if(n.ep)return;n.ep=!0;const r=g(n);fetch(n.href,r)}})();const w=document.getElementById("pong");if(!(w instanceof HTMLCanvasElement))throw new Error("Canvas element not found or not a canvas");const i=w,e=i.getContext("2d");i.width=800;i.height=400;let u=0,y=0;class d{x;y;width;height;color;speed;gravity;constructor(o){this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height,this.color=o.color,this.speed=o.speed??4,this.gravity=o.gravity}}new d({x:10,y:(i.height-80)/2,width:15,height:80,color:"#fff",gravity:2});new d({x:775,y:(i.height-80)/2,width:15,height:80,color:"#fff",gravity:2});new d({x:i.width/2,y:i.height/2,width:15,height:15,color:"#fff",gravity:1});function m(){e.font="bold 48px 'Press Start 2p' ,Courier New, monospace",e.fillStyle="#fff",e.fillText(u.toString(),i.width/2-200,70)}function v(){e.font="bold 48px 'Press Start 2p' ,Courier New, monospace",e.fillStyle="#fff",e.fillText(y.toString(),i.width/2+200,70)}function f(t){e.fillStyle=t.color,e.fillRect(t.x,t.y,t.width,t.height)}function O(){e.save(),e.strokeStyle="#fff",e.lineWidth=4,e.setLineDash([20,20]),e.beginPath(),e.moveTo(i.width/2,10),e.lineTo(i.width/2,i.height),e.stroke(),e.setLineDash([]),e.restore()}const a={};window.addEventListener("keydown",t=>{const o=t.key;a[o]=!0});window.addEventListener("keyup",t=>{const o=t.key;a[o]=!1});let s=160,c=160;function S(){a.w&&(s-=8),a.s&&(s+=8),a.ArrowUp&&(c-=8),a.ArrowDown&&(c+=8),s=Math.max(2,Math.min(318,s)),c=Math.max(2,Math.min(318,c))}async function T(){return await(await fetch("https://localhost:8000/renamePong/state")).json()}async function x(){await fetch("https://localhost:8000/renamePong/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paddleOne:s,paddleTwo:c})})}async function P(){await fetch("https://localhost:8000/renamePong/tick",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paddleOne:s,paddleTwo:c})})}async function p(){S(),await x(),await P();const t=await T();e.clearRect(0,0,i.width,i.height),f(new d({...t.paddleOne,color:"#fff"})),f(new d({...t.paddleTwo,color:"#fff"})),f(new d({...t.ball,color:"#fff"})),u=t.scoreOne,y=t.scoreTwo,m(),v(),O(),window.requestAnimationFrame(p)}p();
